<app-shopping-list-bell [count]="mealplanNumberNotOnShoppingList" [onClick]="openAddItemsView"></app-shopping-list-bell>

  <div 
  class="md:w-3/4 mx-auto select-none"
  *ngFor="let category of categories"
  >
    <div *ngIf="shoppingListByCategory[category].length > 0">
      <h2>Markt: {{marketsService.ShoppingListDisplay[category]}}</h2>
      <div *ngFor="let item of shoppingListByCategory[category]"
      [ngClass]="item.shoppingListIds.length <= 1 ? 'pointer-events-none' : ''"
      style="margin-top: 25px; margin-bottom: 10px; padding-top: 10px; padding-bottom: 10px;">
      <mat-accordion [hideToggle]="item.shoppingListIds.length <= 1">
        <div class="relative pointer-events-auto">
        <app-ingredient-source [url]="item.sourceUrl"></app-ingredient-source>
      </div>
      <mat-expansion-panel>
        <mat-expansion-panel-header [collapsedHeight]="'5em'">
          <mat-panel-description (click)="$event.stopPropagation();">
           
          <div class="flex-col w-full">
            <div class="flex">
              <mat-icon 
            class="pointer-events-auto"
            (click)="removeFromShoppingList(item.shoppingListIds, $event)"
            color="primary" 
            aria-label="Example icon button with a menu icon">
             done
            </mat-icon>
            <div class="ml-5 text-slate-800">{{item.ingredientName}}</div>
            </div>
            <div class="flex w-3/4 items-center gap-10 ml-11">
            <div class="w-1/3">
              {{item.totalAmount}} <span>{{unitsService.ShoppingListUnitDisplay[item.unit]}}</span>
            </div>
            <div class="w-1/5">
                <mat-icon *ngIf="item.isBio" [ngStyle]="{color: 'gray'}">compost</mat-icon>
            </div>
                <mat-icon [ngStyle]="{color: 'gray'}" [matTooltip]="marketsService.MarketDisplay[item.market]">storefront</mat-icon>
            </div>
          </div>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <div *ngFor="let individualItem of item.items">
          <div class="flex w-full gap-5 md:gap-20">
            <mat-icon color="primary" class="cursor-pointer mr-5" (click)="removeFromShoppingList([individualItem.shoppingListId], $event)">done</mat-icon>
            <mat-icon [matTooltip]="displayDate(individualItem.mealplanDate)" [ngStyle]="{color: 'gray'}">calendar_month</mat-icon>
            <p class="mmd:w-1/12 w-1/6 w-text-xs text-slate-400">{{roundAmount(individualItem.mealplanPortions, individualItem.recipeIngredientAmountPerPortion)}} <span>{{unitsService.UnitDisplay[individualItem.recipeIngredientUnit]}}</span></p>
            <p class="text-xs text-slate-400">{{individualItem.recipeName}}</p>
          </div>
        </div>
      </mat-expansion-panel>
      </mat-accordion>
    </div>
    </div>
  </div>
